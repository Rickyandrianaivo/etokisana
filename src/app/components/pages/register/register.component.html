<app-header></app-header>
<div class="container">
    <div class="inner-container">
        <h3>Inscription</h3>
        <input type="file" class="file-input" (change)="onFileImageSelected($event)" #pdpUpload>
        <input type="file" class="file-input" (change)="onFileDocumentSelected($event)" #documentUpload>
        <div class="options">
            <div class="file-upload">
                <ngx-avatars size="100" [src]="image"></ngx-avatars>
                {{ fileName || "Photo de profil"}}
                <button class="upload-btn" (click)="pdpUpload.click()"><mat-icon >attach_file</mat-icon></button>
            </div>
            <div class="file-upload">
                {{ identityFileName || "CIN"}}
                <button class="upload-btn" (click)="documentUpload.click()"><mat-icon >attach_file</mat-icon></button>
            </div>
        </div>
        <img height="100px" *ngIf="identityFile" [src]="identityFile" alt="">
        <form class="register-form-style" [formGroup]="registerForm"  (ngSubmit)="submit()">
            <div class="client-register">
                <div class="row">
                    <app-radio-input
                    [control]="fc.userType"
                    [showErrorsWhen]="isSubmitted"
                    ></app-radio-input>
                </div>
                <div class="row">
                    <text-input
                        [control]="fc.userName"
                        [showErrorsWhen]="isSubmitted"
                        label="Nom">
                    </text-input>
                    <text-input
                        [control]="fc.userFirstname"
                        [showErrorsWhen]="isSubmitted"
                        label="Prénom">
                    </text-input>
                    
                </div>        
                
                <div class="row">
                    <text-input
                        [control]="fc.userEmail"
                        [showErrorsWhen]="isSubmitted"
                        label="Email"
                        [type]="'email'">
                    </text-input>
                    <text-input
                        [control]="fc.indentityCardNumber"
                        [showErrorsWhen]="isSubmitted"
                        label="CIN">
                    </text-input>
                    <text-input
                        [control]="fc.userPhone"
                        [showErrorsWhen]="isSubmitted"
                        label="Téléphone">
                    </text-input>
                </div> 
                <div class="row">
                    <app-password-input
                        [control]="fc.userPassword"
                        [showErrorsWhen]="isSubmitted"
                        label="Mot de passe">
                    </app-password-input>
                    <app-password-input
                        [control]="fc.confirmPassword"
                        [showErrorsWhen]="isSubmitted"
                        label="Confirmation mot de passe">
                    </app-password-input>
                </div>
                <!-- <text-input
                [control]="fc.refId"
                [showErrorsWhen]="isSubmitted"
                label="Referral">
                </text-input>        -->
                <div class="row">
                    <mat-form-field appearance="outline" >
                        <mat-label>Date de naissance</mat-label>
                        <input matInput #dateInput [matDatepicker]="picker" [formControl]="dateOfBirth" (onfocus)="dateInput.type ='date'" (blur)="dateInput.type ='text'"> 
                        <!-- <mat-hint>{{dateFormatString()}}</mat-hint> -->
                        <mat-datepicker-toggle [for]="picker" style="position: absolute;margin-top:-8px;margin-left: -10px;"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
                    </mat-form-field>
                    <text-input
                        [control]="fc.userAddress"
                        [showErrorsWhen]="isSubmitted"
                        label="Adresse">
                    </text-input>
                </div>     
            
        </div>
        
        <div class="rightSide">
            <div class="row">
            <input-container>
            <mat-form-field appearance="outline">
                <mat-label>Latitude</mat-label>
                <input matInput type="text" [(ngModel)]="latitude" [ngModelOptions]="{standalone:true}">
            </mat-form-field>
        </input-container>
        <input-container>
        <mat-form-field appearance="outline">
            <mat-label>Longitude</mat-label>
            <input matInput type="text" [(ngModel)]="longitude" [ngModelOptions]="{standalone:true}">
        </mat-form-field>
    </input-container>
        </div>
            <google-map height="50vh"
                width="50vh"
                [center]="center"
                [zoom]="6"
                (mapClick)="moveMap($event)"
                >
                <!-- (mapMousemove)="move($event)"  -->
                <!-- *ngFor="let position of markerLatLong" -->
            <map-marker 
            [position]="position"></map-marker>
        </google-map>
        </div>
        
            <div class="buttonContainer">
                <!-- <app-default-button text="S'INSCRIRE" type="submit" (onClick)="sendEmail($event)"></app-default-button> -->
                <!-- <app-default-button text="SE CONNECTER" routerLink="/login" type="button"></app-default-button> -->
                 <div>
                    <!-- <app-default-button text="S'inscrire" type="submit" [disabled]="!registerForm.valid" ></app-default-button> -->
                     <app-default-button text="S'inscrire" type="submit"></app-default-button>
                 </div>
                 <a routerLink="/login"><p style="text-align: center;">J'ai déjà un compte</p></a>
            </div>
        </form>
        
        
    </div>
</div>