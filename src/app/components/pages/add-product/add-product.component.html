<app-header></app-header>
<div class="container">
    <div class="inner-container">
        <div class="options">
            <div class="file-upload">
                <h3>Ajouter un produit</h3>
                <input type="file"  name="file" multiple="" class="file-input" (change)="onFileSelected($event)" #productUpload>
                <!-- <img *ngIf="!firstImage" src="default.jpg" height="500px" width="500px"><br> -->
                <!-- <img *ngIf="firstImage" [src]="firstImage" height="500px" width="500px"><br> -->
                 <!-- <img @for displayImage of productImage [src]="displayImage[0]" height="500px" width="500px"><br> -->
                <img [src]="productImage[0]" height="500px" width="500px"><br>
                <div class="row">
                    <img *ngIf="productImage[1]" [src]="productImage[1]" height="50px" width="50px"><br>
                    <img *ngIf="productImage[2]" [src]="productImage[2]" height="50px" width="50px"><br>
                    <img *ngIf="productImage[3]" [src]="productImage[3]" height="50px" width="50px"><br>
                </div>

                {{ fileName || "Photo(s) du produit"}}
                <button class="upload-btn" (click)="productUpload.click()"><mat-icon >Choisir un fichier</mat-icon></button>
            </div>
        </div>
        <form class="register-form-style" [formGroup]="addProductForm"  (ngSubmit)="submit()">
            <div class="client-register">
                
            <!-- Champ descritpion du produit -->
            <!-- <div class="options"> -->
                <!-- Champ document d'identification -->
                <!-- <mat-form-field appearance="outline">
                    <mat-label>Section</mat-label>
                    <mat-select matNativeControl [(value)]="section" >
                        <mat-option value="0" selected>AGRICULTURE, SYLVICULTURE ET PECHE</mat-option>
                        <mat-option value="1">MINERAIS ET MINERAUX; ELECTRICITE GAZ ET EAU</mat-option>
                        <mat-option value="2">PRODUITS ALIMENTAIRES, BOISSONS ET TABACS; MATIERES TEXTILES, ARTICLES D'HABILLEMENT ET OUVRAGES EN CUIR</mat-option>
                        <mat-option value="3">AUTRES BIENS TRANSPORTABLES, A L'EXECLUSION DES OUVRAGES EN METAUX, DES MACHINES ET DU MATERIEL</mat-option>
                        <mat-option value="4">OUVRAGES EN METAUX , MACHINES ET MATERIEL</mat-option>
                        <mat-option value="5">TRAVAUX ET OUVRAGES DE CONSTRUCTION; BIENS FONCIERS</mat-option>
                        <mat-option value="6">SERVICES DE COMMERCE, SERVICES D'HOTERLILERIE</mat-option>
                        <mat-option value="7">SERVICES DE TRANSPORTS,D'ENTREPOSAGE ET DE COMMUNICATIONS</mat-option>
                        <mat-option value="8">SERVICES FOURNIS AUX ENTREPRISES ET AUX SECTEURS AGRICOLES, MINIER ET MANUFACTURIER</mat-option>
                        <mat-option value="9">SERVICES COLLECTIFS, SOCIAUX ET PERSONNELS</mat-option>
                    </mat-select>
                </mat-form-field>                        
            </div>
            <div class="options"> -->
                <!-- Champ division -->
                <!-- <mat-form-field appearance="outline">
                    <mat-label>Division</mat-label>
                    <mat-select matNativeControl [(value)]="division" >
                        <mat-option value="cin" selected>CIN</mat-option>
                        <mat-option value="passeport">Passeport</mat-option>
                        <mat-option value="permis">Permis de conduire</mat-option>
                    </mat-select>
                </mat-form-field>                        
            </div>
            <div class="options"> -->
                <!-- Champ Groupe -->
                <!-- <mat-form-field appearance="outline">
                    <mat-label>Groupe</mat-label>
                    <mat-select matNativeControl [(value)]="groupe" >
                        <mat-option value="cin" selected>CIN</mat-option>
                        <mat-option value="passeport">Passeport</mat-option>
                        <mat-option value="permis">Permis de conduire</mat-option>
                    </mat-select>
                </mat-form-field>                        
            </div>
            <div class="options"> -->
                <!-- Champ document d'identification -->
                <!-- <mat-form-field appearance="outline">
                    <mat-label>Classe</mat-label>
                    <mat-select matNativeControl [(value)]="classe" >
                        <mat-option value="cin" selected>CIN</mat-option>
                        <mat-option value="passeport">Passeport</mat-option>
                        <mat-option value="permis">Permis de conduire</mat-option>
                    </mat-select>
                </mat-form-field>                        
            </div>
            <div class="options"> -->
                <!-- Champ document d'identification -->
                <!-- <mat-form-field appearance="outline">
                    <mat-label>Sous classe</mat-label>
                    <mat-select matNativeControl [(value)]="sousClasse" >
                        <mat-option value="cin" selected>CIN</mat-option>
                        <mat-option value="passeport">Passeport</mat-option>
                        <mat-option value="permis">Permis de conduire</mat-option>
                    </mat-select>
                </mat-form-field>                        
            </div> -->

           <!-- Champ du nom du produit -->
            <!-- <text-input
            [control]="fc.productCategory"
            [showErrorsWhen]="isSubmitted"
            label="Catégorie">
            </text-input> -->
            <div class="row">
                
                <mat-form-field appearance="outline">
                    <mat-label>Category</mat-label>
                    <input type="text" 
                    placeholder="Category"
                    matInput 
                    [formControl]="catCtrl"
                    [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete">
                        @for (category of filteredCat | async; track category.cpc){
                            <button class="autoCompleteCPC" (click)="setCPC(category.cpc)" >
                                <mat-option [value]="category.designation" >
                                    {{category.designation}}
                                </mat-option>
                            </button>
                            }
                    </mat-autocomplete>
                </mat-form-field>        
                <mat-form-field appearance="outline">
                    <mat-label style="color: black;">CPC</mat-label>
                    <input matInput type="text" [(ngModel)]="selected" [ngModelOptions]="{standalone:true}" disabled="true">
                </mat-form-field>      
            </div>
            <!-- Champ du nom du produit -->
            <text-input
            [control]="fc.productName"
            [showErrorsWhen]="isSubmitted"
            label="Nom spécifique">
            </text-input>
            <app-textarea
            [control]="fc.productDescription"
            [showErrorsWhen]="isSubmitted"
            label="Description">
            </app-textarea>
            <!-- Champ Spécificité du produit -->
             <div class="row">
                <!-- Champ du nom du produit -->

             </div>
            <div class="row">
                <!-- Champ Poids du produit -->
                <text-input
                [control]="fc.productPoids"
                [showErrorsWhen]="isSubmitted"
                label="Poids (kg)">
                </text-input>
                <!-- Champ Volume du produit -->
                <text-input
                [control]="fc.productVolume"
                [showErrorsWhen]="isSubmitted"
                label="Volume (L)"> 
                </text-input>
            </div>
            <div class="row">
                <!-- Champ Largeur du produit -->
                <text-input
                [control]="fc.productLargeur"
                [showErrorsWhen]="isSubmitted"
                label="Largeur (m)"> 
                </text-input>
                <!-- Champ Longueur du produit -->
                <text-input
                [control]="fc.productLongueur"
                [showErrorsWhen]="isSubmitted"
                label="Longueur (m)">
                </text-input>
            </div>
            <!-- Champ Hauteur du produit -->
                <text-input
                [control]="fc.productHauteur"
                [showErrorsWhen]="isSubmitted"
                label="Hauteur (m)">
                </text-input>  
             
            </div>
            <!-- Section contenant les boutons -->
            <div class="buttonContainer">
                <app-default-button text="Valider" routerLink="/user-products" type="submit"></app-default-button>
                <app-default-button text="Annuler" routerLink="/user-products" type="button"></app-default-button>
            </div>
        </form>        
    </div>
</div>
